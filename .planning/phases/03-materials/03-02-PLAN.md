---
phase: 03-materials
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - cheatsheet/cheatsheet.md
  - cheatsheet/cheatsheet.pdf
autonomous: true

must_haves:
  truths:
    - "Cheatsheet exists as single-page quick reference (front and back of one sheet)"
    - "Content organized by task frequency (Quick Start → Common Tasks → Advanced → Troubleshooting)"
    - "All code examples work when copy-pasted into workshop exercises"
    - "Cross-references to modules and projects are explicit and accurate"
    - "Cheatsheet is printable (PDF) and searchable (digital)"
  artifacts:
    - path: "cheatsheet/cheatsheet.md"
      provides: "Markdown source with task-frequency organization"
      min_lines: 150
    - path: "cheatsheet/cheatsheet.pdf"
      provides: "Print-ready PDF export (2 pages, front/back)"
      contains: "Quick Start"
  key_links:
    - from: "cheatsheet/cheatsheet.md"
      to: "modules/*/demonstration.md"
      via: "covered-in references"
      pattern: "Covered in: Module \\d{2}"
    - from: "cheatsheet/cheatsheet.md"
      to: "part2/*/starter/README.md"
      via: "apply-in references"
      pattern: "Apply in: part2/[a-z-]+/"
---

<objective>
Create task-frequency organized cheatsheet as single-page quick reference for workshop participants.

Purpose: Provide scannable reference during hands-on exercises covering Gemini API, MediaPipe, Canvas/Three.js, and Firebase patterns. Organized by "what you'll use most" rather than API completeness.

Output: Markdown source + PDF export (2 pages max, front/back of single sheet), optimized for print and digital use.
</objective>

<execution_context>
@/home/ahsan/.claude/get-shit-done/workflows/execute-plan.md
@/home/ahsan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-materials/03-RESEARCH.md

# Reference Phase 1 modules for accurate code patterns
@modules/01-ai-studio-exploration/demonstration.md
@modules/02-structured-output/demonstration.md
@modules/03-multimodal-input/demonstration.md
@modules/04-context-engineering/demonstration.md
@modules/05-grounding-search/demonstration.md
@modules/06-logic-engine/demonstration.md
</context>

<tasks>

<task type="auto">
  <name>Create task-frequency organized cheatsheet with code examples</name>
  <files>cheatsheet/cheatsheet.md</files>
  <action>
Create comprehensive Markdown cheatsheet following task-frequency organization pattern from research:

**Header:**
```
# Code at the Speed of Thought: Quick Reference

**Workshop:** Google Stockholm, Jan 28, 2026
**Cheatsheet Version:** 1.0
```

**Section 1: Quick Start (5 minutes) — Most Essential**

**Basic Gemini Prompt:**
```javascript
import { GoogleGenerativeAI } from "@google/generative-ai";
const genAI = new GoogleGenerativeAI(process.env.API_KEY);
const model = genAI.getGenerativeModel({ model: "gemini-2.0-flash" });
const result = await model.generateContent("Your prompt");
console.log(result.response.text());
```
**Covered in:** Module 01 (AI Studio Exploration)

**API Key Setup:**
- Get free key: aistudio.google.com → Get API Key
- Environment: `GEMINI_API_KEY=your_key_here` in .env file
- Browser: Store in variable, never commit to git

**Section 2: Common Tasks — Use Often During Exercises**

**JSON Structured Output:**
```javascript
const schema = {
  type: "object",
  properties: {
    emotion: { type: "string", enum: ["happy", "sad", "surprised"] },
    confidence: { type: "number", minimum: 0, maximum: 1 }
  },
  required: ["emotion", "confidence"]
};

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
  generationConfig: {
    responseMimeType: "application/json",
    responseSchema: schema
  }
});
```
**Key insight:** Description fields act as model instructions, not just docs
**Covered in:** Module 02 (Structured Output)
**Apply in:** part2/face-reactive/ (emotion detection returns JSON)

**Image Analysis (Multimodal):**
```javascript
const imagePart = {
  inlineData: {
    data: base64ImageString,  // or File API fileUri
    mimeType: "image/png"
  }
};
const result = await model.generateContent([
  "Describe this image",
  imagePart
]);
```
**Token cost:** Images ≤384px = ~258 tokens
**Covered in:** Module 03 (Multimodal Input)

**Context Engineering (Few-Shot Examples):**
```javascript
const prompt = `
<system>You are a helpful assistant specializing in emotion analysis.</system>

<examples>
Input: "Smiling broadly"
Output: {"emotion": "happy", "confidence": 0.95}

Input: "Frowning slightly"
Output: {"emotion": "sad", "confidence": 0.65}
</examples>

<task>
Input: "${userInput}"
Output:
</task>
`;
```
**Optimal:** 2-3 examples (diminishing returns beyond)
**Covered in:** Module 04 (Context Engineering)

**Section 3: MediaPipe & Canvas — Part 2 Essentials**

**MediaPipe Face Detection:**
```javascript
import { FaceLandmarker, FilesetResolver } from
  "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision";

const vision = await FilesetResolver.forVisionTasks(
  "https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision/wasm"
);
const faceLandmarker = await FaceLandmarker.createFromOptions(vision, {
  baseOptions: {
    modelAssetPath: "https://storage.googleapis.com/.../face_landmarker.task",
    delegate: "GPU"  // 60fps on modern GPUs
  },
  numFaces: 1,
  outputFaceBlendshapes: true
});

const result = faceLandmarker.detectForVideo(videoElement, performance.now());
const blendshapes = result.faceBlendshapes[0].categories;
```
**Apply in:** part2/face-reactive/ (emotion detection from blendshapes)

**Canvas 2D Particle System:**
```javascript
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');

// Object pooling for performance
const particles = Array(150).fill(null).map(() => ({
  x: Math.random() * canvas.width,
  y: Math.random() * canvas.height,
  vx: (Math.random() - 0.5) * 2,
  vy: (Math.random() - 0.5) * 2,
  color: '#ffaa00'
}));

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => {
    p.x += p.vx;
    p.y += p.vy;
    ctx.fillStyle = p.color;
    ctx.fillRect(p.x, p.y, 4, 4);
  });
  requestAnimationFrame(animate);
}
```
**Apply in:** part2/face-reactive/ (emotion-driven visualization)

**Section 4: Firebase Realtime Database — Multiplayer**

**Initialize Firebase:**
```javascript
import { initializeApp } from 'firebase/app';
import { getDatabase, ref, set, onValue } from 'firebase/database';

const app = initializeApp({
  databaseURL: "http://localhost:9000?ns=demo-project"  // Emulator
});
const db = getDatabase(app);
```

**Write Data:**
```javascript
const sessionRef = ref(db, `sessions/${sessionId}/players/${playerId}`);
await set(sessionRef, {
  name: playerName,
  score: 0,
  timestamp: Date.now()
});
```

**Real-time Sync:**
```javascript
const playersRef = ref(db, `sessions/${sessionId}/players`);
onValue(playersRef, (snapshot) => {
  const players = snapshot.val();
  updateScoreboard(players);
});
```
**Apply in:** part2/camera-game/ (multiplayer state sync)

**Section 5: Advanced Techniques — Optional**

**Grounding with Google Search:**
```javascript
const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
  tools: [{
    googleSearch: {}  // AI Studio: toggle "Grounding" on
  }]
});
const result = await model.generateContent(
  "What are the latest developments in AI?"
);
// Access grounding metadata: result.response.groundingMetadata
```
**Covered in:** Module 05 (Grounding with Search)

**Section 6: Troubleshooting — When Stuck**

**Common Errors:**
- `API_KEY_INVALID`: Check .env file exists and has correct key format
- `Rate limit exceeded`: Free tier = 15 RPM, wait 1 minute between requests
- `Image too large`: Resize to ≤384px width for optimal token cost
- `JSON parse error`: Check responseSchema matches actual model output
- `Camera permission denied`: HTTPS required (localhost works, HTTP doesn't)
- `Firebase PERMISSION_DENIED`: Emulator rules in firebase.json need updating

**Performance Tips:**
- Particle count: 150 = smooth on most devices, 500+ = GPU needed
- MediaPipe delegate: "GPU" for 60fps, "CPU" for 30fps fallback
- Firebase writes: Batch updates with set() not individual push()

**Resources:**
- API Docs: ai.google.dev/gemini-api/docs
- MediaPipe: ai.google.dev/edge/mediapipe/solutions/vision
- Firebase: firebase.google.com/docs/database
- Workshop Repo: [GitHub URL to be filled by organizer]
  </action>
  <verify>
Check: wc -l cheatsheet/cheatsheet.md shows 150+ lines
Check: grep -c '```javascript' cheatsheet/cheatsheet.md shows 8+ code blocks
Check: grep 'Covered in: Module' cheatsheet/cheatsheet.md shows module cross-references
Check: grep 'Apply in: part2/' cheatsheet/cheatsheet.md shows project cross-references
  </verify>
  <done>
cheatsheet/cheatsheet.md exists with 6 sections organized by task frequency.
All code examples verified against Phase 1 module patterns.
Cross-references to modules and Part 2 projects are explicit and accurate.
Content fits within 2-page constraint (150-200 lines Markdown = ~2 pages PDF).
  </done>
</task>

<task type="auto">
  <name>Export cheatsheet to print-ready PDF</name>
  <files>cheatsheet/cheatsheet.pdf</files>
  <action>
Convert Markdown cheatsheet to print-ready PDF following research recommendations:

**PDF Export Strategy:**
Use Markdown-to-PDF tool (not Marp, which is slides-focused). Options:
1. Pandoc (if available): `pandoc cheatsheet.md -o cheatsheet.pdf --pdf-engine=weasyprint`
2. markdown-pdf (Node.js): `npm install -g markdown-pdf && markdown-pdf cheatsheet.md`
3. VS Code extension: Markdown PDF (yzane.markdown-pdf)

**PDF Requirements:**
- Page size: Letter (8.5" x 11") or A4
- Margins: 0.5" all sides
- Font size: 9-10pt body, 12-14pt headers (scannable when printed)
- Code blocks: Syntax highlighting preserved, monospace font
- Page breaks: Section 1-4 on page 1, Section 5-6 on page 2
- Footer: "Code at the Speed of Thought — Google Stockholm 2026"

**Export Process:**
1. Create cheatsheet/ directory if not exists
2. Copy cheatsheet.md to cheatsheet/ directory
3. Run PDF export tool (try pandoc first, fallback to markdown-pdf)
4. Verify PDF file size (should be <500KB for 2 pages)
5. Check PDF is searchable (text not images)

**Fallback if PDF export fails:**
Create placeholder cheatsheet.pdf with note:
"PDF generation deferred to Phase 5 dry-run. Use markdown-pdf or pandoc with:
pandoc cheatsheet.md -o cheatsheet.pdf --pdf-engine=weasyprint --variable fontsize=10pt"

This is acceptable since PDF is for printing, and Markdown is primary working format.
  </action>
  <verify>
Check: ls -lh cheatsheet/cheatsheet.pdf shows file exists and size <500KB
OR: cat cheatsheet/cheatsheet.pdf | head -1 shows "%PDF" header (valid PDF)
OR: File exists with placeholder note (acceptable fallback)
  </verify>
  <done>
cheatsheet.pdf exists as print-ready export OR placeholder with generation instructions.
If PDF generated: 2 pages, scannable fonts, syntax highlighting preserved, searchable text.
If placeholder: Clear instructions for manual generation during Phase 5 dry-run.
  </done>
</task>

</tasks>

<verification>
Manual checks:
1. cheatsheet.md organized by task frequency (Quick Start → Common → Advanced → Troubleshooting)
2. Code examples match patterns from Phase 1 modules (verified copy-paste would work)
3. Cross-references use explicit module numbers and part2 paths
4. Content fits 2-page constraint (150-200 lines Markdown)
5. PDF export exists or has clear generation instructions

Automated validation:
- wc -l cheatsheet/cheatsheet.md returns 150-200 lines
- grep -c 'Covered in: Module' shows 6+ module references
- grep -c 'Apply in: part2/' shows 3+ project references
- grep -c '```javascript' shows 8+ code blocks
- ls cheatsheet/cheatsheet.pdf confirms file exists (or placeholder)
</verification>

<success_criteria>
MAT-02 complete when:
- Cheatsheet exists as task-frequency organized reference (not API documentation copy)
- Content covers: Gemini API basics, structured output, multimodal, MediaPipe, Canvas, Firebase
- All code examples verified against Phase 1 module patterns
- Cross-references to modules and Part 2 projects are explicit and bidirectional
- Markdown source ready for editing (primary format)
- PDF export exists for printing OR placeholder with clear generation instructions
- Fits 2-page constraint (front/back of single sheet)
- Troubleshooting section addresses common workshop errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-materials/03-02-SUMMARY.md`
</output>
